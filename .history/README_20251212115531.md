
let wishlist = [];


export const favoriteStore = {

    syncStorage() {

        const jsonWishlist = JSON.stringify(wishlist);
        localStorage.setItem('wishlist', jsonWishlist);
    },
    wishlistLoadFromStorage() {
        // obtengo el carrito del localStorage para operar.
        // Si no existe, lo inicializo como un array vacÃ­o.
        let wishlistStorage;
        const jsonWishlist = localStorage.getItem('wishlist');
        if (jsonWishlist) {
            wishlistStorage = JSON.parse(jsonWishlist);
        } else {
            wishlistStorage = [];
        }
        return wishlistStorage;
    },
    addToWishlist(param) {

        if (!param || !param.target) {
            return;
        }

        // Check for both button classes
        const isFavoriteButton = param.target.classList.contains('btn-add-to-wishlist') || 
                                  param.target.closest('.btn-favorite') ||
                                  param.target.closest('.btn-add-to-wishlist');

        if (isFavoriteButton) {
            wishlist = this.wishlistLoadFromStorage(); //obtengo el carrito del localStorage para operar

            // Find the product card element
            const element = param.target.closest('.cart-item') || 
                           param.target.closest('.search-product-card') ||
                           param.target.closest('[data-product-id]') ||
                           param.target.parentNode.parentNode;

            const productId = element.getAttribute('data-product-id');

            if (!productId) {
                console.warn('No product ID found');
                return wishlist;
            }

            // Check if product is already in wishlist
            if (!wishlist.some(product => product.id === productId)) {
                // Create product object
                const product = {
                    id: productId,
                    name: element.querySelector('.item_title')?.textContent?.trim() || '',
                    description: element.querySelector('.item_description')?.textContent?.trim() || '',
                    price: element.querySelector('.item_price')?.textContent?.trim() || '0â‚¬',
                    image: element.querySelector('img')?.src || ''
                };

                wishlist = [...wishlist, product];
                this.syncStorage(); // Save to localStorage
            } else {
                // If already in wishlist, remove it (toggle behavior)
                wishlist = wishlist.filter(product => product.id !== productId);
                this.syncStorage();
            }

            return wishlist;
        }

        return wishlist;
    },
    removeItem(idProducto) {
        wishlist = this.wishlistLoadFromStorage();
        if (Array.isArray(idProducto)) {
            wishlist = wishlist.filter(product => !idProducto.includes(product.id));
        } else {
            wishlist = wishlist.filter(product => product.id !== idProducto);
        }
        this.syncStorage();
        return wishlist;
    },
    totalWishlist() {
        wishlist = this.wishlistLoadFromStorage();
        let total = 0;
        wishlist.forEach(product => {
            total += parseFloat(product.price.replace('â‚¬', '')) * product.quantity;
        });
        return total.toFixed(2);
    }

} VisualizaciÃ³n por categorÃ­as:
  - ğŸ³ Desayunos / Breakfast
  - ğŸ¥© Carnes / Meat
  - ğŸŸ Mariscos / Seafood
  - ğŸ¥— Complementos / Complements
- Detalles de productos
- BÃºsqueda avanzada

### Carrito de Compras / Shopping Cart
- Agregar/eliminar productos
- Actualizar cantidades
- CÃ¡lculo automÃ¡tico de totales
- Persistencia en localStorage

### Checkout / FinalizaciÃ³n de Compra
- Proceso de compra paso a paso
- InformaciÃ³n de envÃ­o
- MÃ©todos de pago
- ConfirmaciÃ³n de pedido

## ğŸ“ Datos de Ejemplo / Sample Data

Los datos se almacenan en archivos JSON dentro de `assets/data/`:
- `products.json` - CatÃ¡logo de productos
- `categories.json` - CategorÃ­as disponibles
- `users.json` - Usuarios registrados

## ğŸŒ Idiomas Soportados / Supported Languages

- ğŸ‡ªğŸ‡¸ **EspaÃ±ol (ES)** - `/ES/`
- ğŸ‡¬ğŸ‡§ **English (EN)** - `/EN/`
- ğŸ‡«ğŸ‡· **FranÃ§ais (FR)** - `/FR/`
- ğŸ‡ªğŸ‡º **Euskera (EU)** - `/EU/`

## ğŸ¨ Estilos / Styling

El proyecto utiliza CSS modular organizado por componentes:
- `main.css` - Estilos principales
- `nav.css` - NavegaciÃ³n
- `footer.css` - Pie de pÃ¡gina
- `checkout.css` - Proceso de checkout
- `modal.css` - Modales y popups
- `vars.css` - Variables CSS

## ğŸ”§ Desarrollo / Development

### Estructura de MÃ³dulos JavaScript

El cÃ³digo JavaScript estÃ¡ organizado en mÃ³dulos ES6:
- `authService.js` - Servicio de autenticaciÃ³n
- `cartStore.js` - GestiÃ³n del estado del carrito
- `productService.js` - Servicio de productos
- `favoriteStore.js` - GestiÃ³n de favoritos

## ğŸ‘¥ Equipo / Team

### Achraf RZZ
- ğŸ”— [LinkedIn](https://www.linkedin.com/in/achrafrzz/)

### Kevin Ruiz
- ğŸ”— [GitHub](https://github.com/Kevingedev/)

### German Illan
- ğŸ”— [GitHub](https://github.com/German2024279/)

## ğŸ“„ Licencia / License

Este proyecto es de cÃ³digo abierto y estÃ¡ disponible bajo la licencia MIT.

This project is open source and available under the MIT License.

## ğŸ‘¥ Contribuciones / Contributions

Las contribuciones son bienvenidas. Por favor, abre un issue o pull request para cualquier mejora.

Contributions are welcome. Please open an issue or pull request for any improvements.

---

**Desarrollado con â¤ï¸ para amantes de la comida gourmet**

**Developed with â¤ï¸ for gourmet food lovers**
